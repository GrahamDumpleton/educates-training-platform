#@ load("@ytt:data", "data")

#@ ingress_secret_ref_name = data.values.tlsCertificateRef.name
#@ ingress_secret_ref_namespace = data.values.tlsCertificateRef.namespace

#@ if/end ingress_secret_ref_name and ingress_secret_ref_namespace and ingress_secret_ref_namespace != data.values.namespace.name:
---
apiVersion: #@ "secrets.{}/v1alpha1".format(data.values.operatorApiGroup)
kind: SecretCopier
metadata:
  name: #@ "{}-ingress-secret".format(data.values.resourceNamePrefix)
spec:
  rules:
  - sourceSecret:
      name: #@ ingress_secret_ref_name
      namespace: #@ ingress_secret_ref_namespace
    targetNamespaces:
      nameSelector:
        matchNames:
        - #@ data.values.namespace.name
